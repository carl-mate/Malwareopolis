package com.mygdx.game;

import com.badlogic.gdx.scenes.scene2d.Stage;

public class ArivaPowerWasp extends BaseArtillery{
    private YellowEnergyCapsule yellowEnergyCapsule = null;
    private final float CD = 5.0f;
    private float bloomCooldownTime = CD;
    private boolean hasYellowCapsule = true;

    public ArivaPowerWasp(float x, float y, Stage s) {
        super(x, y, s);
        String[] filenames = {"ariva-power-wasp-1.png", "ariva-power-wasp-2.png","ariva-power-wasp-3.png","ariva-power-wasp-4.png"};
        loadAnimationFromFiles(filenames);
    }

    private void generateYellowEnergyCapsule(float dt){
        if(!hasDropTarget()) return;

        if(hasYellowCapsule){
            bloomCooldownTime -= dt;
        }

        if (bloomCooldownTime < 0 && hasYellowCapsule ) {
            yellowEnergyCapsule = new YellowEnergyCapsule(0,0, this.getStage(), false);
            yellowEnergyCapsule.setArivaPowerWaspParent(this);
            yellowEnergyCapsule.centerAtActor(this);
            bloomCooldownTime = CD;
            hasYellowCapsule = false;
        }

        if (yellowEnergyCapsule == null) {
            hasYellowCapsule = true;
        }
    }

    public void removeYellowEnergyCapsule () {
        yellowEnergyCapsule = null;
    }

    @Override
    public void act(float dt) {
        super.act(dt);
        generateYellowEnergyCapsule(dt);
    }
}
