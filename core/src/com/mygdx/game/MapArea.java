package com.mygdx.game;

import com.badlogic.gdx.graphics.g2d.Animation;
import com.badlogic.gdx.graphics.g2d.TextureRegion;
import com.badlogic.gdx.scenes.scene2d.Stage;
import com.badlogic.gdx.scenes.scene2d.actions.Actions;

public class MapArea extends DropTargetActor{
    public MapArea(float x, float y, Stage s) {
        super(x, y, s);
        loadScaledTexture("success.png", true);
        setBoundaryPolygon(4);
    }

    public void showSuccessTexture(){
        loadScaledTexture("success.png", false);
    }

    public void showFailureTexture() {
        loadScaledTexture("failure.png", false);
    }

    private void setOldSize(float[] size) {
        setWidth(size[0]);
        setHeight(size[1]);
    }

    private float[] getOldSize() {
        float[] size = new float[2];
        size[0] = getWidth();
        size[1] = getHeight();
        return size;
    }

    private void loadScaledTexture(String texName, boolean firstVisit){
        float[] oldSize;
        if (! firstVisit) {
            clearActions();
            oldSize = getOldSize();
        }
        else {
            oldSize = new float[2];
        }
        Animation<TextureRegion> animation =
                loadAnimationFromFiles(new String[] {texName}, 0.0f, false);
        setAnimation(animation);
        setOpacity(0.0f);

        if(! firstVisit){
            addAction(Actions.sequence(Actions.fadeIn(0.5f), Actions.fadeOut(0.5f)));
            setOldSize(oldSize);
        }
    }

    @Override
    public boolean isTargetable() {
        return super.isTargetable();
    }
}
